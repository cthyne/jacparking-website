<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA Compatible" content="IE-Edge"/>
    <meta name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <!-- Style Sheet -->
    <link href="./style/contact.css" rel="stylesheet">

    <!-- Connecting to JS -->
    <!-- <script src="../src/app.js"></script> -->
    

    <!-- Imported thumbnails for input groups -->
    <script src="https://kit.fontawesome.com/c4254e24a8.js" crossorigin="anonymous"></script>

    <noscript>This site requires JavaScript.</noscript>
    
     <!-- Imported Fonts -->  
     <style>
        @import url('https://fonts.googleapis.com/css2?family=Bigshot+One&family=Dancing+Script&family=Dorsa&family=Monoton&display=swap');
    </style>
    <link rel="icon" href="./photos/logo-jac-big.png">
    <title>
        Contact Us
    </title>
  </head>
<body>
    <div class="background">
        <div class="nav-bar">
            <nav class="nav d-flex justify-content-center align-items-center">
                <a class="nav-link" href="index.html">Home</a>
                <a class="nav-link" href="about.html">About Us</a>
                <a class="nav-link" href="locations.html">Locations</a>
                <a class="nav-link" href="contact.html">Contact Us</a>
            </nav>
        </div>
        <div class="title-page">
            <h1>Get In Touch</h1>
        </div>
        <div class="contact-container">
            <form>
                <label for="name">Name:</label>
                <input name="name" type="text"/><br/><br/>
                <label for="email">Email:</label>
                <input name="email" type="email"/><br/><br/>
                <label for="name">Message:</label>
                <textarea name="message"></textarea><br/><br/>
                <input type="submit"/>
                <div>
                    <p id="result-text"></p>
                </div>
                
                <!-- <div class="input-group">
                    <input 
                        id="name" 
                        type="text" 
                        name="name" 
                        required
                    />
                    <label for="name"><i class="fas fa-user"></i>Your Name</label>
                </div>
                <div class="input-group">
                    <input 
                        id="email" 
                        type="text" 
                        name="email" 
                        required
                    />
                    <label for="email"><i class="fas fa-envelope"></i>Email</label>
                </div> -->
                <!-- <div class="input-group">
                    <input
                        id="phone"
                        type="text"
                        name="phone"
                        placeholder="1234567890"
                        pattern="\d{3}\d{3}\d{4}"
                        required
                    />
                    <label for="phone"> 
                        <i class="fas fa-phone-square-alt"></i>Phone</label>
                </div> -->
                <!-- <div class="input-group">
                    <textarea
                    id="message"
                    name="message"
                    rows="5"
                    required
                    maxlength="200"
                    ></textarea>
                    <label for="message"><i class="fas fa-comments"></i>Your message</label>
                </div>
                <button type="submit"><i class="fas fa-paper-plane"></i>Submit</button>
                <div>
                    <p id="result-text"></p>
                  </div>
                <button type="reset"><i class="fa fa-refresh"></i>Reset</button>  -->

            </form>
        </div>
        <script>
            const form = document.querySelector("form");
            form.addEventListener("submit", (event) => {
            // prevent the form submit from refreshing the page
            event.preventDefault();
        
            const { name, email, message } = event.target;
        
                // Use your API endpoint URL you copied from the previous step
            const endpoint =
                "https://21r8ofbihc.execute-api.us-west-2.amazonaws.com/default/emailSender";
            // We use JSON.stringify here so the data can be sent as a string via HTTP
                const body = JSON.stringify({
                senderName: name.value,
                senderEmail: email.value,
                message: message.value
            });
            const requestOptions = {
                method: "POST",
                body
            };
        
            fetch(endpoint, requestOptions)
                .then((response) => {
                if (!response.ok) throw new Error("Error in fetch");
                return response.json();
                })
                .then((response) => {
                document.getElementById("result-text").innerText =
                    "Email sent successfully!";
                })
                .then(() => {
                // do stuff with `json` body
                 window.location.replace("https://www.jacmgmthi.com/public/thanks.html")
                })
                .catch((error) => {
                document.getElementById("result-text").innerText =
                    "An unkown error occured.";
                })
            });
        </script>
    </div>
    <!-- Set a cross-site cookie for third-party contexts -->
    <!-- <script>
        document.cookie = "name=cookiesetting; SameSite=None; Secure";
    </script>  -->
</body>

    <footer>
        <div class="contact-info">
            <div class ="address">
                <p> 
                    Address: <br>
                    <a href="https://www.google.com/maps/dir//163+Lahainaluna+Rd,+Lahaina,+HI+96761/@20.876147,-156.6811787,17z/data=!4m9!4m8!1m0!1m5!1m1!1s0x79552bb98c085353:0x84d1de4220917bfb!2m2!1d-156.67899!2d20.876142!3e0">163-165 Lahainaluna Road<br>
                    Lahaina, HI 96708 <br>
                    </a>
                </p>
            </div>
            <div class ="contact">
                <p> 
                    Get In Touch: <br>
                    808-495-5485 <br>
                <a href="mailto:jacmgmt10@icloud.com">Send email</a>
                </p>
            </div>
            <div class="logo">
                <img src="./photos/logo-jac-big.png" class="img-thumbnail" alt="Bird of paradise graphic">
            </div>
        </div>
  </footer>
</html>